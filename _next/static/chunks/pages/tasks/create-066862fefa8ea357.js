(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{2491:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/create",function(){return t(2921)}])},2921:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var l=t(5893),a=t(7294),i=t(1163),n=t(1649),r=t(2682),c=t(7066),d=t(8387);let o=(0,d.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var m=t(4318),x=t(3550);function u(){let[e,s]=(0,a.useState)({title:"",description:"",estimatedDuration:30,difficulty:"medium",priority:"medium",cycleType:"once",deadline:""}),[t,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),p=(0,i.useRouter)(),y=(0,n.I0)(),j=e=>{let{name:t,value:l}=e.target;s(e=>({...e,[t]:l}))},b=async s=>{s.preventDefault(),d(!0),h("");try{let s=localStorage.getItem("token"),t=await c.Z.post("".concat("http://localhost:3001","/api/tasks"),e,{headers:{Authorization:"Bearer ".concat(s)}});t.data.success&&(y((0,r.gI)(t.data.data)),p.push("/tasks"))}catch(s){var t,l;let e=(null===(l=s.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.message)||"创建任务失败，请稍后重试";h(e)}finally{d(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex items-center h-16",children:[(0,l.jsxs)("button",{onClick:()=>p.back(),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,l.jsx)(o,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"返回"})]}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 ml-8",children:"创建新任务"})]})})}),(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("form",{onSubmit:b,className:"p-6 space-y-6",children:[u&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,l.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"基本信息"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"任务标题 *"}),(0,l.jsx)("input",{id:"title",name:"title",type:"text",required:!0,value:e.title,onChange:j,className:"input",placeholder:"例如：刷《数学练习册》P20-30 函数题"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"任务描述"}),(0,l.jsx)("textarea",{id:"description",name:"description",rows:3,value:e.description,onChange:j,className:"input",placeholder:"补充任务细节，如重点做第3、5题"})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,l.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"时间设置"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"estimatedDuration",className:"block text-sm font-medium text-gray-700 mb-2",children:"预计时长 (分钟) *"}),(0,l.jsx)("input",{id:"estimatedDuration",name:"estimatedDuration",type:"number",min:"10",max:"180",required:!0,value:e.estimatedDuration,onChange:j,className:"input"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"deadline",className:"block text-sm font-medium text-gray-700 mb-2",children:"截止时间"}),(0,l.jsx)("input",{id:"deadline",name:"deadline",type:"datetime-local",value:e.deadline,onChange:j,className:"input"})]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"任务设置"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"difficulty",className:"block text-sm font-medium text-gray-700 mb-2",children:"难度等级"}),(0,l.jsxs)("select",{id:"difficulty",name:"difficulty",value:e.difficulty,onChange:j,className:"input",children:[(0,l.jsx)("option",{value:"easy",children:"简单"}),(0,l.jsx)("option",{value:"medium",children:"中等"}),(0,l.jsx)("option",{value:"hard",children:"困难"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"优先级"}),(0,l.jsxs)("select",{id:"priority",name:"priority",value:e.priority,onChange:j,className:"input",children:[(0,l.jsx)("option",{value:"high",children:"高"}),(0,l.jsx)("option",{value:"medium",children:"中"}),(0,l.jsx)("option",{value:"low",children:"低"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"cycleType",className:"block text-sm font-medium text-gray-700 mb-2",children:"周期类型"}),(0,l.jsxs)("select",{id:"cycleType",name:"cycleType",value:e.cycleType,onChange:j,className:"input",children:[(0,l.jsx)("option",{value:"once",children:"一次性任务"}),(0,l.jsx)("option",{value:"repeat",children:"重复任务"}),(0,l.jsx)("option",{value:"milestone",children:"里程碑任务"})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,l.jsx)("button",{type:"button",onClick:()=>p.back(),className:"btn-secondary",disabled:t,children:"取消"}),(0,l.jsx)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:t,children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"创建中..."})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("span",{children:"创建任务"})})})]})]})})})]})}u.requireAuth=!0},4318:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var l=t(8387);let a=(0,l.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3550:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var l=t(8387);let a=(0,l.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},function(e){e.O(0,[512,774,888,179],function(){return e(e.s=2491)}),_N_E=e.O()}]);