(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1015:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(5542)}])},5542:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return v}});var t=a(5893),l=a(7294),r=a(1649),d=a(4318),n=a(597),c=a(2597),i=a(9394),o=a(9837),x=a(3550),h=a(9009),m=a(8687),u=a(4195),j=a(3023),p=a(5358),g=a(6050),f=a(6880),N=a(3604),b=a(6208),y=a(3815);function v(){var e;let[s,a]=(0,l.useState)({todayDuration:0,todayTasks:0,totalCards:0,weekData:[],subjectData:[]}),[v,w]=(0,l.useState)(!0),{user:k}=(0,r.v9)(e=>e.auth);(0,l.useEffect)(()=>{C()},[]);let C=async()=>{try{let t=localStorage.getItem("token"),l=await fetch("".concat("http://localhost:3001","/api/users/profile"),{headers:{Authorization:"Bearer ".concat(t)}}),r=await l.json();if(r.success){var e,s;a({todayDuration:(null===(e=r.data.stats)||void 0===e?void 0:e.today_duration)||0,todayTasks:(null===(s=r.data.stats)||void 0===s?void 0:s.completed_tasks)||0,totalCards:r.data.total_cards||0,weekData:[{day:"周一",duration:45,tasks:3},{day:"周二",duration:30,tasks:2},{day:"周三",duration:60,tasks:4},{day:"周四",duration:25,tasks:1},{day:"周五",duration:90,tasks:5},{day:"周六",duration:120,tasks:6},{day:"周日",duration:80,tasks:4}],subjectData:[{name:"数学",value:35,color:"#8B5CF6"},{name:"英语",value:25,color:"#EC4899"},{name:"物理",value:20,color:"#10B981"},{name:"化学",value:20,color:"#F59E0B"}]})}}catch(e){console.error("获取仪表板数据失败:",e)}finally{w(!1)}};return v?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"加载中..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"w-6 h-6 text-purple-600"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gradient",children:"学习喵"})]}),(0,t.jsx)("span",{className:"text-gray-400",children:"|"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["欢迎回来，",(null==k?void 0:k.username)||"学习者","！"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,t.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-purple-600",children:(null==k?void 0:null===(e=k.username)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"今日学习时长"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(e=>{let s=Math.floor(e/60),a=e%60;return s>0?"".concat(s,"h ").concat(a,"m"):"".concat(a,"m")})(s.todayDuration)})]}),(0,t.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,t.jsx)(d.Z,{className:"w-6 h-6 text-purple-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"今日完成任务"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.todayTasks})]}),(0,t.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,t.jsx)(n.Z,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"收集卡片"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s.totalCards})]}),(0,t.jsx)("div",{className:"bg-yellow-100 p-3 rounded-lg",children:(0,t.jsx)(o.Z,{className:"w-6 h-6 text-yellow-600"})})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5 mr-2 text-purple-600"}),"本周学习趋势"]}),(0,t.jsx)(h.h,{width:"100%",height:250,children:(0,t.jsxs)(m.w,{data:s.weekData,children:[(0,t.jsx)(u.q,{strokeDasharray:"3 3"}),(0,t.jsx)(j.K,{dataKey:"day"}),(0,t.jsx)(p.B,{}),(0,t.jsx)(g.u,{formatter:e=>["".concat(e,"分钟"),"学习时长"]}),(0,t.jsx)(f.x,{type:"monotone",dataKey:"duration",stroke:"#8B5CF6",strokeWidth:2,dot:{fill:"#8B5CF6",r:4}})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 mr-2 text-purple-600"}),"学科分布"]}),(0,t.jsx)(h.h,{width:"100%",height:250,children:(0,t.jsxs)(N.u,{children:[(0,t.jsx)(b.b,{data:s.subjectData,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:a}=e;return"".concat(s," ").concat((100*a).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:s.subjectData.map((e,s)=>(0,t.jsx)(y.b,{fill:e.color},"cell-".concat(s)))}),(0,t.jsx)(g.u,{})]})})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"快速开始"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("button",{onClick:()=>window.location.href="/tasks/create",className:"flex items-center justify-center space-x-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"创建任务"})]}),(0,t.jsxs)("button",{onClick:()=>window.location.href="/tasks",className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"任务列表"})]}),(0,t.jsxs)("button",{onClick:()=>window.location.href="/cards",className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"卡片图鉴"})]})]})]})]})]})}v.requireAuth=!0}},function(e){e.O(0,[247,774,888,179],function(){return e(e.s=1015)}),_N_E=e.O()}]);